## 文件上传漏洞

### 什么是文件上传漏洞？

文件上传漏洞是指==文件上传功能没有对上传的文件做合理严谨的过滤==，导致用户可以利用此功能，上传能被服务端解析执行的文件，并通过此文件获得执行服务端命令的能力（Webshell）。

### 什么是Webshell?

WebShell , 简称网页后门。简单来说它是运行在Web应用之上的远程控制程序。

- WebShell其实就是`一张网页`，由`PHP、JSP、ASP、ASP.NET`等这类web应用程序语言开发，但webShell并不具备常见网页的功能，例如登录、注册、信息展示等功能，一般会具备文件管理、端口扫描、提权、获取系统信息等功能。

### 常见的WebShell有哪些？

- 大马、小马、各种马…等
- 拥有较完整功能的webshell，我们一般称为`大马`。
- 功能简易的webshell称为`小马`。
- 除此之外还存在`一句话木马、菜刀马、脱库马`等等的名词，是对于webShell功能或者特性的简称。

## 一句话木马

### 什么是一句话木马？

### PHP

`<?php @eval($_POST[x]); ?>`

这就是最简单的一句话木马。

- `$_POST[x]`: 获取 `POST`请求参数中X的值。例如`POST`请求中传递 `x=phpinfo();`，那么 `$_POST[x]`就等同于`phpinfo();`
- `eval（）`将字符串当做PHP代码去执行。例如 `eval('phpinfo();')`，其中 `phpinfo();`会被当做PHP代码去执行

```
<?php @eval($_POST[x]); ?>   实际上的传递过程是这样的
			↓
			↓			
			↓
<?php @eval('phpinfo();'); ?> 实际的语句是这样的
```

- 我们通过该webshell，传递任意PHP代码，让其去执行，从而达到任意代码执行。

### 其他常用的一句话木马

- ### ASP

`<%eval request("x")%>`

- ### ASP.NET

`<%@ Page Language="Jscript"%><%eval (Request.Item["x"],"unsafe");%>`

这些一句话木马的本质是一样的，不同环境要用不同的一句话木马。

## 常用 WebShell 管理工具

- 中国菜刀
- 中国蚁剑
- 冰蝎
- 哥斯拉
- 其他工具